"use strict";const e=require("../../../../common/vendor.js"),t=require("./const.js"),l=require("./hooks/usetab.js");if(!Array){(e.resolveComponent("mot-empty")+e.resolveComponent("mot-button")+e.resolveComponent("uni-popup"))()}Math||(o+n+(()=>"../../../mot-empty/components/mot-empty/mot-empty.js")+(()=>"../../../mot-button/components/mot-button/mot-button.js")+(()=>"../../../uni-popup/components/uni-popup/uni-popup.js"))();const o=()=>"./components/tab.js",n=()=>"./components/check.js",a=e.defineComponent({__name:"mot-cascader",props:t.comProps,emits:["update:modelValue","update:visible","change","confirm"],setup(o,{emit:n}){const a=o,u="mot-cascader",s=e=>`${u}__${e}`,{activeTab:i,tabList:r,updateTabs:p,selectedTabOptions:m,onChangeTab:c,onSelectOption:d,showMultiple:f,isLastDeep:v}=l.useTab(a,n),b=e=>{const{selected:t}=m.value;if(!t)return!1;if(Array.isArray(t))return t.some((t=>t[y.value]===e));return t[y.value]===e},h=e.computed((()=>{var e,t;return f.value&&(null==(t=null==(e=m.value)?void 0:e.selected)?void 0:t.length)>0})),y=e.computed((()=>a.fieldNames.value)),g=e.computed((()=>a.fieldNames.children)),j=e.computed((()=>a.fieldNames.text)),x=e.computed((()=>Object.assign(a.options,t.defaultOptionsProps))),k=e.ref();e.watch([()=>a.visible,()=>a.modelValue],(async([t,l])=>{if(await(async t=>{!k.value&&await e.nextTick$1(),t?k.value&&k.value.open():k.value&&k.value.close()})(t),!t)return;let o=l;Array.isArray(o)&&(o=o[0]),p(a.renderData,o),a.multiple&&A(a.modelValue)}),{immediate:!0});const C=()=>{n("update:visible",!1),T()},T=()=>{i.value=-1,f.value=!1,v.value=-1},w=()=>{const e=m.value.selected.filter((e=>e[y.value])).map((e=>e[y.value]));n("update:modelValue",e),n("confirm",r.value),C()},A=e=>{var t;if(!e)return;const l=m.value.options;l[0][g.value]||(m.value.selected=l.filter((t=>e.includes(t[y.value]))),r.value[i.value]={text:a.options.formatmultipleSelected(null==(t=m.value.selected)?void 0:t.length)},f.value=!0)},$=e=>{e===v.value&&a.multiple?f.value=!0:f.value=!1,c(e)};return(t,l)=>e.e({a:t.title},t.title?{b:e.t(t.title),c:e.o(C),d:e.n(s("title"))}:{},{e:t.$slots.header},t.$slots.header?{f:e.n(s("header"))}:{},{g:e.o($),h:e.p({data:e.unref(r),textKey:t.fieldNames.text,active:e.unref(i)}),i:e.n(s("tab")),j:e.unref(m).options.length},e.unref(m).options.length?{k:e.f(e.unref(m).options,((t,l,o)=>e.e(e.unref(f)?e.e({a:"04efb796-2-"+o+",04efb796-0",b:e.p({multiple:!0,active:b(t[e.unref(y)])}),c:t.spell},t.spell?{d:e.t(t.firstChar)}:{},{e:e.t(t[e.unref(j)])}):e.e({f:t.spell},t.spell?{g:e.t(t.firstChar)}:{},{h:e.t(t[e.unref(j)]),i:"04efb796-3-"+o+",04efb796-0",j:e.p({multiple:!1,active:b(t[e.unref(y)])})}),{k:t[e.unref(y)],l:e.o((e=>(e=>{e.disabled||a.multiple&&m.value.selected.length>=a.options.multipleMaxCount||d(e)})(t)),t[e.unref(y)])}))),l:e.unref(f),m:e.n(s("select-item")),n:e.n(s("select"))}:{o:e.p({image:"https://table-file.xironiot.com/images/1705290039372040784_Frame 2446.png",description:"\n"}),p:e.n(s("select"))},{q:e.unref(h)},e.unref(h)?{r:e.t(e.unref(x).multipleButtonText),s:e.o(w),t:e.p({type:"primary",text:"",isBlock:!0}),v:e.n(s("footer"))}:{},{w:e.n(u),x:e.sr(k,"04efb796-0",{k:"popupRef"}),y:e.p({type:"bottom","safe-area":!1,"is-mask-click":!1})})}});wx.createComponent(a);
