"use strict";const e=require("../../../common/vendor.js"),o=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js"),require("../../../store/modules/device.js"),require("../../../store/modules/order.js"),require("../../../store/modules/user.js"),require("../../../utils/uniAsync.js");const s=require("../../../utils/validate.js");require("../../../utils/wx.log.js"),require("../../../utils/config/index.js");const r=require("../../../hooks/uni-hooks/dialog.js");require("../../../hooks/uni-hooks/request.js");const n=require("../../../hooks/uni-hooks/router.js"),i=require("../../../hooks/uni-hooks/unite.js");require("../../../hooks/uni-hooks/wechat.js"),require("../../../hooks/useCountryCode.js");const u=require("../../../api/user.js"),t=require("../../../api/data.js");if(require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../const/platform.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../theme/hooks/useTheme.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),require("../../../api/device.js"),require("../../../api/order.js"),require("../../../const/order.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),!Array){(e.resolveComponent("mot-cascader")+e.resolveComponent("mot-button")+e.resolveComponent("mot-modal"))()}Math||((()=>"../../../uni_modules/mot-cascader/components/mot-cascader/mot-cascader.js")+(()=>"../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const a=e.defineComponent({__name:"index",setup(a){const d=e.ref({province:"",city:"",region:"",region_code:"",address:"",name:"",contact:"",phone:""}),l=e.ref([]),c=e.ref(!1),m=()=>{c.value=!0},h=o=>{o.height>0&&c.value&&e.index.hideKeyboard()},p=e.ref([]),j=e=>{p.value=e};e.onLoad((()=>{i.unite.setNavigationBarTitle(o.t("sub-pages.me.join-us.index.title"))})),e.onShow((()=>{console.log("onShow"),e.index.onKeyboardHeightChange(h)})),e.onHide((()=>{console.log("onUnmounted"),e.index.offKeyboardHeightChange(h)}));const g=e.computed((()=>p.value.map((e=>e.name)).join("/"))),q=e.computed((()=>p.value.map((e=>e.name)))),k=[{label:o.t("sub-pages.me.join-us.index.name"),key:"name",placeholder:o.t("sub-pages.me.join-us.index.name_require")},{label:o.t("sub-pages.me.join-us.index.region_code"),key:"region_code",placeholder:o.t("sub-pages.me.join-us.index.region_code_require")},{label:o.t("sub-pages.me.join-us.index.address"),key:"address",placeholder:o.t("sub-pages.me.join-us.index.address_require")},{label:o.t("sub-pages.me.join-us.index.contact"),key:"contact",placeholder:o.t("sub-pages.me.join-us.index.contact_require")},{label:o.t("pages.person.index.3"),key:"phone",placeholder:o.t("sub-pages.me.join-us.index.phone_require")}],f=()=>{const e=k.find((e=>{if(!d.value[e.key])return e}));if(e)return void r.toast(`${e.placeholder}`);if(!s.isInternationalPhone(d.value.phone))return void r.toast(o.t("sub-pages.me.join-us.index.phone_correct"));const[i="",t="",a=""]=q.value;d.value.province=i,d.value.city=t,d.value.region=a,u.userApi.postCooperationApi(d.value).then((()=>{r.dialog.showModal({content:o.t("sub-pages.me.join-us.index.submit_success"),showCancel:!1}).then((()=>{n.navigateBack()}))}))};e.onMounted((()=>{t.dataApi.getAreaData().then((e=>{l.value=e.regionData}))}));const b=e.ref();return(s,r)=>({a:"overflow:"+(e.unref(c)?"hidden":"visible"),b:e.t(e.unref(o.t)("sub-pages.me.join-us.index.fill")),c:e.t(e.unref(o.t)("sub-pages.me.join-us.index.sure")),d:e.f(k,((s,r,n)=>e.e({a:"region_code"===s.key},"region_code"===s.key?{b:e.t(e.unref(o.t)("sub-pages.me.join-us.index.region_code")),c:e.t(e.unref(d).region_code?e.unref(g):e.unref(o.t)("sub-pages.me.join-us.index.region_code_require")),d:e.n(e.unref(d).region_code?"":"address"),e:e.o(m,s.key),f:e.o(j,s.key),g:"a9e95de1-0-"+n,h:e.o((o=>e.unref(d).region_code=o),s.key),i:e.o((o=>e.isRef(c)?c.value=o:null),s.key),j:e.p({title:e.unref(o.t)("sub-pages.me.join-us.index.region_code_require"),fieldNames:{text:"name",value:"code",children:"children"},"render-data":e.unref(l),modelValue:e.unref(d).region_code,visible:e.unref(c)})}:{k:e.t(s.label),l:s.placeholder,m:e.unref(c),n:e.unref(d)[s.key],o:e.o((o=>e.unref(d)[s.key]=o.detail.value),s.key)},{p:s.key}))),e:e.t(e.unref(o.t)("sub-pages.me.join-us.index.submit")),f:e.o(f),g:e.p({isBlock:!0,type:"primary"}),h:e.sr(b,"a9e95de1-2",{k:"ModalRef"}),i:e.p({id:"ModalRef"})})}}),d=e._export_sfc(a,[["__scopeId","data-v-a9e95de1"]]);wx.createPage(d);
