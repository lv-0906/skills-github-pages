"use strict";const e=require("../../../common/vendor.js"),o=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js"),require("../../../store/modules/device.js"),require("../../../store/modules/order.js");const s=require("../../../store/modules/user.js");require("../../../utils/uniAsync.js");const r=require("../../../utils/validate.js");require("../../../utils/wx.log.js"),require("../../../utils/config/index.js");const t=require("../../../hooks/uni-hooks/dialog.js");require("../../../hooks/uni-hooks/request.js");const i=require("../../../hooks/uni-hooks/router.js"),u=require("../../../hooks/uni-hooks/unite.js");require("../../../hooks/uni-hooks/wechat.js");const n=require("../../../api/user.js");require("../../../hooks/useCountryCode.js");const a=require("./const.js"),l=require("./hook.js");if(require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../const/platform.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../theme/hooks/useTheme.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),require("../../../api/device.js"),require("../../../api/order.js"),require("../../../const/order.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),require("../../../hooks/useUpload.js"),!Array){(e.resolveComponent("uni-file-picker")+e.resolveComponent("mot-button")+e.resolveComponent("mot-modal"))()}Math||((()=>"../../../node-modules/@dcloudio/uni-ui/lib/uni-file-picker/uni-file-picker.js")+(()=>"../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const c=e.defineComponent({__name:"index",setup(c){const d=s.useUserStore(),{selectImage:m,deleteImage:p,uploadImgsPromises:f}=l.useImageUpload(),h=e.ref(a.tabDefaultOption),j=e.reactive({content:"",phone:"",images:[],feedback_type:1,nickname:d.user.nickname}),q=e.ref(!1);e.onLoad((()=>{u.unite.setNavigationBarTitle(o.t("v1_me.feature"))}));const k=async()=>{if(!q.value)if(j.content)if(!j.phone||r.isInternationalPhone(j.phone)){q.value=!0,j.feedback_type=h.value.filter((e=>e.selected))[0].value;try{const e=await Promise.all(f());j.images=e;const{id:s=""}=await n.userApi.postFeedbacksApi(j);if(s){t.toast(o.t("sub-pages.me.feature.index.9"));const e=setTimeout((()=>{clearTimeout(e),i.navigateBack()}),1e3)}}catch(e){return}finally{q.value=!1}}else t.toast(o.t("v1_deposit.toast.phone"));else t.toast(o.t("sub-pages.me.feature.index.8"))},g=e.ref();return(s,r)=>({a:e.f(e.unref(h),((o,s,r)=>({a:e.n(o.selected?"motcabinet-success-filling primary":"motcabinet-huibiankuang"),b:e.t(o.label),c:s,d:e.o((e=>(e=>{h.value.forEach((o=>{h.value.filter((o=>o.value===e.value))[0].selected=!0,h.value.filter((o=>o.value!==e.value))[0].selected=!1}))})(o)),s)}))),b:e.t(e.unref(o.t)("sub-pages.me.feature.index.2")),c:e.unref(o.t)("sub-pages.me.feature.index.3"),d:e.unref(j).content,e:e.o((o=>e.unref(j).content=o.detail.value)),f:e.t(e.unref(o.t)("sub-pages.me.feature.index.4")),g:e.t(e.unref(o.t)("sub-pages.me.feature.index.5")),h:e.o(e.unref(m)),i:e.o(e.unref(p)),j:e.p({"file-mediatype":"image",title:e.unref(o.t)("sub-pages.order.ten.index.6"),"return-type":"array",limit:"9"}),k:e.t(e.unref(o.t)("sub-pages.me.feature.index.10")),l:e.unref(o.t)("sub-pages.me.feature.index.11"),m:e.unref(j).phone,n:e.o((o=>e.unref(j).phone=o.detail.value)),o:e.t(e.unref(o.t)("sub-pages.me.feature.index.7")),p:e.o(k),q:e.p({isBlock:!0,type:"primary",shape:"square",loading:e.unref(q)}),r:e.sr(g,"8baa561d-2",{k:"ModalRef"}),s:e.p({id:"ModalRef"})})}}),d=e._export_sfc(c,[["__scopeId","data-v-8baa561d"]]);wx.createPage(d);
