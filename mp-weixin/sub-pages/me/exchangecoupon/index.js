"use strict";const e=require("../../../common/vendor.js"),o=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js"),require("../../../store/modules/device.js"),require("../../../store/modules/order.js"),require("../../../store/modules/user.js"),require("../../../utils/uniAsync.js"),require("../../../utils/wx.log.js");const s=require("../../../utils/config/index.js"),u=require("../../../hooks/uni-hooks/dialog.js");require("../../../hooks/uni-hooks/request.js");const r=require("../../../hooks/uni-hooks/router.js");require("../../../hooks/uni-hooks/wechat.js"),require("../../../hooks/useCountryCode.js");const n=require("../../../hooks/business/use-exchange-coupon.js"),i=require("./hook.js");if(require("../../../hooks/uni-hooks/unite.js"),require("../../../const/platform.js"),require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../theme/hooks/useTheme.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),require("../../../api/device.js"),require("../../../api/order.js"),require("../../../api/user.js"),require("../../../const/order.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),require("../../../const/coupon.js"),require("../../../api/coupon.js"),!Array){(e.resolveComponent("mot-button")+e.resolveComponent("mot-modal"))()}Math||(t+(()=>"../../../uni_modules/mot-button/components/mot-button/mot-button.js")+c+p+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const t=()=>"../../../components/input/index.js",c=()=>"../../../components/v1/coupon/shop-list-popup.js",p=()=>"../../../components/v1/coupon/comfirm-modal.js",a=e.defineComponent({__name:"index",setup(t){const c=[{name:"",value:1,desc:o.t("coupon.meituan_exchange_description"),url:"/sub-pages/single/meituan/index"},{name:"",value:2,desc:o.t("coupon.wuyoucun_exchange_description"),url:"/sub-pages/single/wuyoucun/index"}],{showConponPopup:p,openConponPopup:a}=i.useshowConpon(),{showComfirmPopup:l,openComfirmPopup:m}=i.useshowComfirmConpon(),{code:h,onScan:d,onExchange:j}=n.useExchangeCouponGlobal(),q=e.ref(),f=e=>{g.conponItem=e,m()},k=()=>{a()},g=e.reactive({conponItem:null}),v=async()=>{h.value?h.value.includes("wyc")?await j({code:h.value}):a():u.toast(o.t("coupon.enter_or_paste_code"))};return(u,n)=>({a:e.unref(s.config).fileBaseUrl+"/coupon/coupon-header.png",b:e.o(((...o)=>e.unref(d)&&e.unref(d)(...o))),c:e.o((o=>e.isRef(h)?h.value=o:null)),d:e.p({type:"number",maxlength:"20",size:"large",placeholder:e.unref(o.t)("coupon.enter_or_paste_code"),modelValue:e.unref(h)}),e:e.f(c,((o,s,u)=>({a:e.t(o.desc),b:e.o((s=>e.unref(r.navigateTo)(o.url)))}))),f:e.t(e.unref(o.t)("components.v1.coupon.coupon-popup.9")),g:e.o(v),h:e.p({shape:"square",isBlock:!0,disabled:!e.unref(h)}),i:e.o(f),j:e.o((o=>e.isRef(p)?p.value=o:null)),k:e.p({visible:e.unref(p)}),l:e.o(k),m:e.o((o=>e.unref(j)(o))),n:e.o((o=>e.isRef(l)?l.value=o:null)),o:e.p({item:e.unref(g).conponItem,modelValue:e.unref(l)}),p:e.sr(q,"526cb16a-4",{k:"ModalRef"}),q:e.p({id:"ModalRef"})})}});wx.createPage(a);
