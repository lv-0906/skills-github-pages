"use strict";const e=require("../../../common/vendor.js");require("../../../local/index.js"),require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js"),require("../../../store/modules/device.js"),require("../../../store/modules/order.js"),require("../../../store/modules/user.js"),require("../../../utils/uniAsync.js"),require("../../../utils/wx.log.js"),require("../../../utils/config/index.js"),require("../../../hooks/uni-hooks/dialog.js"),require("../../../hooks/uni-hooks/request.js"),require("../../../hooks/uni-hooks/wechat.js"),require("../../../hooks/useCountryCode.js");const s=require("../../../api/user.js");exports.useIdentify=r=>{const o=e.ref({});return{postParams:o,onIdentify:r=>new Promise((i=>{e.index.getFileSystemManager().readFile({filePath:r,encoding:"base64",success:async e=>{const r="data:image/jpeg;base64,"+e.data;o.value.image_base64=r;try{await s.userApi.postIdentity(o.value,!0),i(!0)}catch(u){i(!1)}},fail:e=>{i(!1),console.error("读取文件失败",e)}})}))}};
