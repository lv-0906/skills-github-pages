"use strict";const e=require("../../../common/vendor.js"),o=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js");const r=require("../../../store/modules/device.js");require("../../../store/modules/order.js");const s=require("../../../store/modules/user.js"),i=require("../../../utils/dayjs.js"),t=require("../../../utils/format.js"),n=require("../../../const/order.js");require("../../../utils/uniAsync.js"),require("../../../utils/wx.log.js");const u=require("../../../utils/config/index.js");require("../../../hooks/uni-hooks/dialog.js"),require("../../../hooks/uni-hooks/request.js");const a=require("../../../hooks/uni-hooks/router.js"),d=require("../../../hooks/uni-hooks/unite.js"),c=require("../../../hooks/uni-hooks/wechat.js");require("../../../hooks/useCountryCode.js");const l=require("../../../api/order.js");if(require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../const/platform.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../theme/hooks/useTheme.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),require("../../../api/device.js"),require("../../../api/user.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),!Array){(e.resolveComponent("mot-button")+e.resolveComponent("mot-modal"))()}Math||((()=>"../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const m=e.defineComponent({__name:"index",setup(m){const h=r.useDeviceStore(),j=s.useUserStore(),q=e.reactive({orders:[],totalCount:0});e.onLoad((()=>{d.unite.setNavigationBarTitle(o.t("v1_deposit.title")),f()}));const f=async()=>{const e=await l.lockerOrderApi.find({limit:100,skip:0,status:n.OrderStatusEnum.Progressing});q.totalCount=e.length;const o=[...e];q.orders=o.slice(0,2)},p=()=>{const{id:e,page:o}=j;e&&"home"===o?k(e):c.envEvent.scanCode().then((e=>{k(e)}))},k=async e=>{await h.fetchCabinet(e),h.goNextPage()},g=()=>{a.navigateTo("/sub-pages/order/pick/index")},{orders:v,totalCount:_}=e.toRefs(q),b=e.ref();return(r,s)=>({a:e.t(e.unref(o.t)("order.pending.index.1")+e.unref(_)+e.unref(o.t)("order.pending.index.2")),b:e.f(e.unref(v),((o,r,s)=>e.e({a:e.t(e.unref(i.format)(o.created_at,e.unref(i.FORMAT_TO_DAY))),b:o.info},o.info?{c:e.t(e.unref(t.fullLockerName)(o.info.locker_name,o.info.cabinet_address)),d:e.t(o.info.site_name)}:{},{e:o.id}))),c:e.unref(v).length<2?1:"",d:e.t(e.unref(o.t)("order.pick.title")),e:e.o(g),f:e.t(e.unref(o.t)("sub-pages.order.pending.index.7")),g:e.unref(u.config).fileBaseUrl+"/p14.png",h:e.t(e.unref(o.t)("sub-pages.order.pending.index.8")),i:e.o(p),j:e.p({shape:"square",isBlock:!0}),k:e.t(e.unref(o.t)("order.pick.nav_history")),l:e.sr(b,"1e7bafa6-1",{k:"ModalRef"}),m:e.p({id:"ModalRef"})})}}),h=e._export_sfc(m,[["__scopeId","data-v-1e7bafa6"]]);wx.createPage(h);
