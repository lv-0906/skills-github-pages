"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../utils/clone.js"),o=require("../../../../utils/dayjs.js"),t=require("../../../../utils/format.js"),i=require("../../../../local/index.js");require("../../../../hooks/uni-hooks/new-dialog.js"),require("../../../../store/modules/app.js");const s=require("../../../../store/modules/device.js");require("../../../../store/modules/order.js");const n=require("../../../../store/modules/user.js");require("../../../../hooks/uni-hooks/dialog.js"),require("../../../../hooks/uni-hooks/request.js");const d=require("../../../../hooks/uni-hooks/router.js"),u=require("../../../../const/order.js"),a=require("../../../../const/emit.js");require("../../../../hooks/uni-hooks/wechat.js"),require("../../../../hooks/useCountryCode.js"),require("../../../../utils/uniAsync.js"),require("../../../../utils/wx.log.js"),require("../../../../utils/config/index.js");const l=require("../../../../hooks/use-keyval/index.js"),c=require("../../../../shared/order.js");if(require("../../../../shared/pay.js"),require("../../../../hooks/uni-hooks/unite.js"),require("../../../../const/platform.js"),require("../../../../shared/cache.js"),require("../../../../const/cache.js"),require("../../../../hooks/uni-hooks/cache.js"),require("../../../../utils/config/env.js"),require("../../../../uni_modules/mot-utils/index.js"),require("../../../../theme/hooks/useTheme.js"),require("../../../../theme/hooks/themeConfig.js"),require("../../../../theme/hooks/themeKeys.js"),require("../../../../api/device.js"),require("../../../../api/order.js"),require("../../../../api/user.js"),require("../../../../hooks/usePromise.js"),require("../../../../api/delivery.js"),require("../../../../shared/device.js"),require("../../../../const/common.js"),require("../../../../utils/appEnterVerif.js"),require("../../../../hooks/use-common.js"),require("../../../../hooks/uni-hooks/loading.js"),require("../../../../hooks/uni-hooks/common.js"),require("../../../../utils/url.js"),require("../../../../hooks/uni-hooks/report.js"),require("../../../../api/data.js"),require("../../../../const/coupon.js"),require("../../../../hooks/useWechatSI.js"),require("../../../../utils/is.js"),!Array){(e.resolveComponent("mot-button")+e.resolveComponent("uni-icons"))()}Math||(m+(()=>"../../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+p)();const m=()=>"../../../../components/business/order-status/index.js",p=()=>"../../../../components/business/order-item/footer-button.js",f=e.defineComponent({__name:"order-item",props:{order:{type:Object,default:()=>({})},from:{type:String,default:""}},emits:["cbClick"],setup(m,{emit:p}){const f=m,{DepositTypeTextMap:_,LockerTypeTextMap:j,RentalPeriodTextMap:h}=l.useKeyval(),q=s.useDeviceStore(),k=n.useUserStore(),y=async()=>{var o,t,i,s,n,u,l,c;if(!(null==(t=null==(o=f.order)?void 0:o.info)?void 0:t.cabinet_scene))return;await k.fetchUser(),await q.fetchCabinet({id:null==(s=null==(i=f.order)?void 0:i.info)?void 0:s.cabinet_scene},!0);const m=(null==(n=k.jdOrderOpt)?void 0:n.data)||{},p=r.deepClone(m),{province:_,city:j,region:h,address:y="",id:v}=q.site,{address:g}=q.cabinet,b=`${y}${g?""+(y?"-":"")+g:""}`;p.sender_contact=Object.assign({},p.sender_contact,{province:_,city:j,area:h,address:b,mobile:k.phone||""}),k.setJdOrderOpt({locker_order_id:f.order.id,locker_id:f.order.locker_id,locker_name:null==(u=f.order.info)?void 0:u.locker_name,locker_type:null==(l=f.order.info)?void 0:l.locker_type,rental_period:null==(c=f.order.pay_rule)?void 0:c.rental_period,site_id:v,data:p}),"jd_again"===f.from?d.navigateBack().then((()=>{var r,o;e.index.$emit(a.EMIT_GET_LOCKER_RULE,{locker_type:null==(r=f.order.info)?void 0:r.locker_type,rental_period:null==(o=f.order.pay_rule)?void 0:o.rental_period})})):d.redirectTo("/sub-pages/v2/xd/deposit/index?from=order")},v=()=>{c.showOwing(f.order)?p("cbClick",{type:u.OrderButtonEnum.RenewEnd,order:{...f.order,fetchSite:y,enterFrom:f.from}}):y()},g=({type:e,order:r})=>{p("cbClick",{type:e,order:{...r}})};return(r,s)=>{var n,d;return e.e({a:"jd"==m.from||"jd_again"==m.from},"jd"==m.from||"jd_again"==m.from?{b:e.p({order:m.order})}:{},{c:m.order.info},m.order.info?{d:e.t(e.unref(t.fullLockerName)(m.order.info.locker_name,m.order.info.cabinet_address)),e:e.t(e.unref(i.t)("common.unit.no")),f:e.t(e.unref(j)[m.order.info.locker_type]),g:e.t(m.order.info.site_name)}:{},{h:"jd"!==m.from&&"jd_again"!==m.from},"jd"!==m.from&&"jd_again"!==m.from?e.e({i:e.unref(c.showOwing)(m.order)&&!e.unref(c.isReserve)(m.order)},e.unref(c.showOwing)(m.order)&&!e.unref(c.isReserve)(m.order)?{j:e.t(e.unref(i.t)("order.detail.btn.close")),k:e.o((r=>g({type:e.unref(u.OrderButtonEnum).Close,order:m.order}))),l:e.p({type:"warning",shape:"square"})}:{m:e.t(e.unref(i.t)("order.detail.detail")),n:e.p({size:"16",color:"#c7c7c7"}),o:`/sub-pages/order/detail/index?orderId=${m.order.id}`}):{},{p:e.t(e.unref(i.t)("order.detail.used_time")),q:e.t(e.unref(t.numberToZhTime)(m.order.used_time)),r:e.unref(c.isReserve)(m.order)},e.unref(c.isReserve)(m.order)?{s:e.t(e.unref(i.t)("order.detail.excluding_reservation_time"))}:{},{t:m.order.pay_rule.type===e.unref(u.OrderRentTypeEnum).Time},m.order.pay_rule.type===e.unref(u.OrderRentTypeEnum).Time?{v:e.t(e.unref(i.t)("order.detail.rental_period")),w:e.t(e.unref(h)[null==(d=null==(n=m.order)?void 0:n.pay_rule)?void 0:d.rental_period])}:{},{x:m.order.pay_rule&&m.order.pay_rule.cost&&m.order.pay_rule.cost.free_time},m.order.pay_rule&&m.order.pay_rule.cost&&m.order.pay_rule.cost.free_time?{y:e.t(e.unref(i.t)("order.detail.free_time")),z:e.t(m.order.pay_rule.cost.free_time||0),A:e.t(e.unref(i.t)("common.unit.minute"))}:{},{B:m.order.coupon},m.order.coupon?{C:e.t(e.unref(i.t)("order.detail.coupon")),D:e.t(m.order.coupon.name)}:{},{E:e.t(e.unref(i.t)("order.detail.start_at")),F:e.t(e.unref(o.format)(m.order.start_at)),G:e.t(e.unref(i.t)("order.detail.end_at_alias")),H:e.t(e.unref(o.format)(m.order.end_at)),I:e.t(e.unref(i.t)("order.detail.site_name")),J:e.t(m.order.info&&m.order.info.site_name||"-"),K:e.t(e.unref(i.t)("order.detail.fetch_type")),L:e.t(e.unref(_)[m.order.fetch_type]),M:"jd"==m.from||"jd_again"==m.from},"jd"==m.from||"jd_again"==m.from?{N:e.t(e.unref(c.showOwing)(m.order)?"支付后转快递":"转快递"),O:e.o(v),P:e.p({isBlock:!0,shape:"square",type:"default"})}:{Q:e.o(g),R:e.p({order:m.order})})}}}),_=e._export_sfc(f,[["__scopeId","data-v-776cccaa"]]);wx.createComponent(_);
