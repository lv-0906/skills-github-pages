"use strict";const e=require("../../../common/vendor.js");require("../../../store/modules/app.js");const o=require("../../../store/modules/device.js");require("../../../store/modules/order.js");const s=require("../../../store/modules/user.js");require("../../../local/index.js"),require("../../../hooks/uni-hooks/new-dialog.js");const r=require("../../../utils/dayjs.js"),i=require("../../../utils/format.js"),t=require("../../../const/platform.js");require("../../../utils/uniAsync.js"),require("../../../utils/wx.log.js");const n=require("../../../utils/config/index.js"),u=require("../../../hooks/uni-hooks/dialog.js");require("../../../hooks/uni-hooks/request.js");const a=require("../../../hooks/uni-hooks/router.js"),l=require("../../../hooks/uni-hooks/wechat.js"),d=require("../../../api/delivery.js");require("../../../hooks/useCountryCode.js");const c=require("./const.js");if(require("../../../api/device.js"),require("../../../api/order.js"),require("../../../api/user.js"),require("../../../const/order.js"),require("../../../hooks/usePromise.js"),require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/uni-hooks/unite.js"),require("../../../utils/config/env.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../theme/hooks/useTheme.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),!Array){(e.resolveComponent("mot-nav-bar")+e.resolveComponent("mot-button")+e.resolveComponent("mot-modal"))()}Math||((()=>"../../../uni_modules/mot-nav-bar/components/mot-nav-bar/mot-nav-bar.js")+(()=>"../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const m=e.defineComponent({__name:"index",setup(m){const h=o.useDeviceStore(),j=s.useUserStore(),q=e.ref([]);e.onLoad((async e=>{console.log("option",e);const o=await d.DeliveryApi.list();q.value=o}));const p=async()=>{if(t.PlatformEnum!==t.PlatformEnumPayEnum.wx)return void u.toast("请使用微信扫码下单");const{id:e,page:o}=j;if(e&&"express"===o)return await h.fetchCabinet({id:e}),void f();l.envEvent.scanCode("express").then((async e=>{"express"===e.page?(await h.fetchCabinet({id:e.id}),f()):u.toast("请使用微信扫码下单")}))},f=()=>{const{business_model:e}=h.site;"locker_express"===e?h.goNextPage(2,{nearby:!1,routeway:a.navigateTo,follow:!0}):u.toast("该网点不支持寄件")},k=()=>{a.reLaunch("/pages/v1/index/index")},v=e.ref();return(o,s)=>e.e({a:e.o(k),b:!e.unref(q).length},e.unref(q).length?{d:e.f(e.unref(q),((o,s,t)=>{var n,u,a,l;return{a:e.t(e.unref(c.orderStatusMap)[o.order_status]),b:(l=o.status,[1,2,3,4,5,6].includes(l)?1:""),c:e.t(null==(n=null==o?void 0:o.info)?void 0:n.site_name),d:e.t(o.id),e:e.t(e.unref(i.fullLockerName)(null==(u=null==o?void 0:o.info)?void 0:u.locker_name,null==(a=null==o?void 0:o.info)?void 0:a.cabinet_address)),f:e.t(o.phone),g:e.t(e.unref(r.format)(o.created_at)),h:o.id}}))}:{c:e.unref(n.config).fileBaseUrl+"/home/delivery_logo.png"},{e:e.o(p),f:e.p({type:"primary",shape:"square",isBlock:!0}),g:e.sr(v,"6d9cae66-2",{k:"ModalRef"}),h:e.p({id:"ModalRef"})})}}),h=e._export_sfc(m,[["__scopeId","data-v-6d9cae66"]]);wx.createPage(h);
