"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../utils/clone.js");require("../../../../local/index.js"),require("../../../../hooks/uni-hooks/new-dialog.js"),require("../../../../store/modules/app.js");const s=require("../../../../store/modules/device.js");require("../../../../store/modules/order.js");const r=require("../../../../store/modules/user.js"),i=require("../../../../hooks/uni-hooks/dialog.js");require("../../../../hooks/uni-hooks/request.js");const n=require("../../../../hooks/uni-hooks/router.js"),t=require("../../../../const/jd.js");require("../../../../hooks/uni-hooks/wechat.js");const u=require("../../../../hooks/useDebounce.js");require("../../../../hooks/useCountryCode.js"),require("../../../../utils/uniAsync.js"),require("../../../../utils/wx.log.js");const a=require("../../../../utils/config/index.js");if(require("../../../../hooks/uni-hooks/unite.js"),require("../../../../const/platform.js"),require("../../../../shared/cache.js"),require("../../../../const/cache.js"),require("../../../../hooks/uni-hooks/cache.js"),require("../../../../utils/config/env.js"),require("../../../../uni_modules/mot-utils/index.js"),require("../../../../theme/hooks/useTheme.js"),require("../../../../theme/hooks/themeConfig.js"),require("../../../../theme/hooks/themeKeys.js"),require("../../../../api/device.js"),require("../../../../api/order.js"),require("../../../../api/user.js"),require("../../../../const/order.js"),require("../../../../hooks/usePromise.js"),require("../../../../api/delivery.js"),require("../../../../shared/device.js"),require("../../../../const/common.js"),require("../../../../utils/appEnterVerif.js"),require("../../../../hooks/use-common.js"),require("../../../../hooks/uni-hooks/loading.js"),require("../../../../hooks/uni-hooks/common.js"),require("../../../../utils/url.js"),require("../../../../hooks/uni-hooks/report.js"),require("../../../../api/data.js"),!Array){(e.resolveComponent("mot-nav-bar")+e.resolveComponent("mot-button")+e.resolveComponent("uni-icons")+e.resolveComponent("mot-modal"))()}Math||((()=>"../../../../uni_modules/mot-nav-bar/components/mot-nav-bar/mot-nav-bar.js")+(()=>"../../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const d=e.defineComponent({__name:"index",setup(d){const c=r.useUserStore(),l=s.useDeviceStore(),m={fixed:!0},j=u.useDebounce((async e=>{await c.fetchUser();const o={data:{sender_contact:{mobile:c.phone||""}}};if(c.setJdOrderOpt(o,!0),e===t.JdOrderTypeEnum.STORAGE){const{id:e,page:o}=c;e&&"jdexpress"===o&&await p(),n.navigateTo("/sub-pages/v2/xd/deposit/index")}else n.navigateTo("/sub-pages/order/pick/index?from=jd")}),300),p=async()=>{var e;console.log("--------getSiteInfo--------");const{id:s,sceneInfo:r}=c;await c.fetchUser(),await l.fetchCabinet({id:s,locker_scene:null==r?void 0:r.locker_scene},!0);const{business_model:n}=l.site;if("locker_jd_express"!==n)return i.toast("该网点不支持快递寄件");if(!l.hasFreeCabinet(l.cabinet))return i.toast("该网点暂无可用柜门");const t=(null==(e=c.jdOrderOpt)?void 0:e.data)||{},u=o.deepClone(t),{province:a,city:d,region:m,address:j="",id:p}=l.site,{address:h}=l.cabinet,q=`${j}${h?""+(j?"-":"")+h:""}`;u.sender_contact=Object.assign({},u.sender_contact,{province:a,city:d,area:m,address:q,mobile:c.phone||""}),c.setJdOrderOpt({site_id:p,data:u})},h=()=>{n.reLaunch("/pages/v1/index/index")},q=e.ref();return(o,s)=>({a:e.o(h),b:e.p({options:m}),c:e.unref(a.config).fileBaseUrl+"/jd/home_banner.png",d:e.unref(a.config).fileBaseUrl+"/jd/storage_express.png",e:e.p({size:"small"}),f:e.o((o=>e.unref(j)(e.unref(t.JdOrderTypeEnum).STORAGE))),g:e.unref(a.config).fileBaseUrl+"/jd/storage_order.png",h:e.p({size:"small"}),i:e.o((o=>e.unref(j)(e.unref(t.JdOrderTypeEnum).ORDER))),j:e.p({type:"right",size:"10",color:"#222"}),k:e.o((o=>e.unref(n.navigateTo)("/sub-pages/v2/xd/order/index"))),l:e.unref(a.config).fileBaseUrl+"/jd/guide_banner.png",m:e.sr(q,"2ed3b79b-4",{k:"ModalRef"}),n:e.p({id:"ModalRef"})})}}),c=e._export_sfc(d,[["__scopeId","data-v-2ed3b79b"]]);wx.createPage(c);
