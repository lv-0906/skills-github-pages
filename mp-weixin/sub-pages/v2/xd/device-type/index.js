"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../const/order.js"),r=require("../../../../const/site.js"),i=require("../../../../local/index.js");require("../../../../hooks/uni-hooks/new-dialog.js"),require("../../../../store/modules/app.js");const s=require("../../../../store/modules/device.js");require("../../../../store/modules/order.js");const t=require("../../../../store/modules/user.js");require("../../../../utils/uniAsync.js"),require("../../../../utils/wx.log.js");const n=require("../../../../utils/config/index.js");require("../../../../hooks/uni-hooks/dialog.js"),require("../../../../hooks/uni-hooks/request.js");const u=require("../../../../hooks/uni-hooks/router.js"),c=require("../../../../hooks/uni-hooks/unite.js"),l=require("../../../../hooks/uni-hooks/wechat.js"),a=require("../../../../hooks/useWechatSI.js");require("../../../../hooks/useCountryCode.js");const d=require("../../../../theme/hooks/useTheme.js");if(require("../../../../shared/cache.js"),require("../../../../const/cache.js"),require("../../../../hooks/uni-hooks/cache.js"),require("../../../../utils/config/env.js"),require("../../../../const/platform.js"),require("../../../../uni_modules/mot-utils/index.js"),require("../../../../api/device.js"),require("../../../../api/order.js"),require("../../../../api/user.js"),require("../../../../hooks/usePromise.js"),require("../../../../api/delivery.js"),require("../../../../shared/device.js"),require("../../../../const/common.js"),require("../../../../utils/appEnterVerif.js"),require("../../../../hooks/use-common.js"),require("../../../../hooks/uni-hooks/loading.js"),require("../../../../hooks/uni-hooks/common.js"),require("../../../../utils/url.js"),require("../../../../hooks/uni-hooks/report.js"),require("../../../../api/data.js"),require("../../../../theme/hooks/themeConfig.js"),require("../../../../theme/hooks/themeKeys.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("mot-modal"))()}Math||(p+(()=>"../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const p=()=>"../../../../components/mot-site/index.js",m=e.defineComponent({__name:"index",setup(p){const{autoPlay:m}=a.useWechatSI(),_=s.useDeviceStore(),v=t.useUserStore(),{themeConfig:y}=d.useTheme(),k=y.value["$border-color"],g=e.computed((()=>v.language)),h=e.computed((()=>_.lockerTypeText)),j=e.reactive({site:_.site,cabinet:_.cabinet,deviceTypes:[{type:o.lockerTypeEnum.S,name:i.t("v1_device_type.s.name"),count:0,desc:i.t("v1_device_type.s.description"),img:n.config.fileBaseUrl+"/locker/locker_s.png",imgEmpty:n.config.fileBaseUrl+"/locker/locker_s_empty.png",rental_period:o.RentalPeriodEnum.SHORT_RENTAL},{type:o.lockerTypeEnum.M,name:i.t("v1_device_type.m.name"),count:0,desc:i.t("v1_device_type.m.description"),img:n.config.fileBaseUrl+"/locker/locker_m.png",imgEmpty:n.config.fileBaseUrl+"/locker/locker_m_empty.png",rental_period:o.RentalPeriodEnum.SHORT_RENTAL},{type:o.lockerTypeEnum.L,name:i.t("v1_device_type.l.name"),count:0,desc:i.t("v1_device_type.l.description"),img:n.config.fileBaseUrl+"/locker/locker_l.png",imgEmpty:n.config.fileBaseUrl+"/locker/locker_l_empty.png",rental_period:o.RentalPeriodEnum.SHORT_RENTAL},{type:o.lockerTypeEnum.EL,name:i.t("v1_device_type.el.name"),count:0,desc:i.t("v1_device_type.el.description"),img:n.config.fileBaseUrl+"/locker/locker_el.png",imgEmpty:n.config.fileBaseUrl+"/locker/locker_el_empty.png",rental_period:o.RentalPeriodEnum.SHORT_RENTAL}]}),q=e.computed((()=>_.locker_count_map)),f=e.computed((()=>_.locker_types));e.onLoad((()=>{l.envEvent.report.addPage("a_page_locker_type_view"),m(i.t("sub-pages.v1.device-type.index.1")),E(),c.unite.setNavigationBarTitle(i.t("sub-pages.order.deposit.index.39"))}));const E=()=>{j.deviceTypes=j.deviceTypes.map((e=>{var r,i,s;const t=q.value[e.type],n=(null==(i=null==(r=h.value)?void 0:r[e.type])?void 0:i[g.value])||e.desc,u=((e,r)=>{const i=e||{};return((null==i?void 0:i[o.RentalPeriodEnum.SHORT_RENTAL])||[]).includes(r)?o.RentalPeriodEnum.SHORT_RENTAL:((null==i?void 0:i[o.RentalPeriodEnum.LONG_RENTAL])||[]).includes(r)?o.RentalPeriodEnum.LONG_RENTAL:o.RentalPeriodEnum.SHORT_RENTAL})(null==(s=j.cabinet)?void 0:s.rental_period_map,e.type);return{...e,count:t,desc:n,rental_period:u}})).filter((e=>f.value.includes(e.type)))},T=e.ref();return(o,s)=>({a:e.p({"show-disclaimer":!0}),b:e.f(e.unref(j).deviceTypes,((o,s,t)=>e.e({a:o.count>0?o.img:o.imgEmpty,b:e.t(o.name),c:e.t(o.count),d:e.t(o.desc),e:!o.count},o.count?{}:{f:e.t(e.unref(i.t)("sub-pages.v1.device-type.index.2")),g:e.o((e=>{return i=o.type,l.envEvent.report.addPage({page_name:"a_page_device_nearby_view",full_cabinet_entrance_type:"choose"}),void u.navigateTo(`/sub-pages/common/device-nearby/index?type=${i}&scene=${r.lockerSenceMap.express}`);var i}),o.type)},{h:o.count>0},o.count>0?{i:"82e847bc-1-"+t,j:e.p({type:"forward",size:"10",color:e.unref(k)})}:{},{k:o.type,l:e.n(o.count>0?"":"disabled"),m:e.o((e=>(({count:e,type:o,rental_period:r})=>{e>0&&(v.setJdOrderOpt({locker_type:o,rental_period:r}),u.navigateTo("/sub-pages/order/locker/index?from=jd_device_type"))})(o)),o.type)}))),c:e.t(e.unref(i.t)("v1_device_type.available")),d:e.sr(T,"82e847bc-2",{k:"ModalRef"}),e:e.p({id:"ModalRef"})})}}),_=e._export_sfc(m,[["__scopeId","data-v-82e847bc"]]);wx.createPage(_);
