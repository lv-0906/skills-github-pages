"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../const/jd.js");require("../../../../store/modules/app.js"),require("../../../../store/modules/device.js"),require("../../../../store/modules/order.js");const s=require("../../../../store/modules/user.js");require("../../../../local/index.js");const r=require("../../../../hooks/uni-hooks/new-dialog.js"),n=require("../../../../utils/clone.js"),u=require("../../../../utils/is.js");require("../../../../utils/uniAsync.js"),require("../../../../utils/wx.log.js");const i=require("../../../../utils/config/index.js"),t=require("../../../../hooks/uni-hooks/dialog.js");require("../../../../hooks/uni-hooks/request.js");const a=require("../../../../hooks/uni-hooks/router.js");require("../../../../hooks/uni-hooks/wechat.js"),require("../../../../hooks/useCountryCode.js");const d=require("../../../../hooks/business/use-address.js"),l=require("../../../../hooks/business/use-jd-info-check.js");if(require("../../../../api/device.js"),require("../../../../api/order.js"),require("../../../../api/user.js"),require("../../../../const/order.js"),require("../../../../hooks/usePromise.js"),require("../../../../api/delivery.js"),require("../../../../shared/cache.js"),require("../../../../const/cache.js"),require("../../../../hooks/uni-hooks/cache.js"),require("../../../../shared/device.js"),require("../../../../const/common.js"),require("../../../../utils/appEnterVerif.js"),require("../../../../hooks/uni-hooks/unite.js"),require("../../../../const/platform.js"),require("../../../../utils/config/env.js"),require("../../../../uni_modules/mot-utils/index.js"),require("../../../../theme/hooks/useTheme.js"),require("../../../../theme/hooks/themeConfig.js"),require("../../../../theme/hooks/themeKeys.js"),require("../../../../hooks/use-common.js"),require("../../../../hooks/uni-hooks/loading.js"),require("../../../../hooks/uni-hooks/common.js"),require("../../../../utils/url.js"),require("../../../../hooks/uni-hooks/report.js"),require("../../../../api/data.js"),require("../../../../utils/format.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("mot-button")+e.resolveComponent("mot-modal")+e.resolveComponent("mot-cascader"))()}Math||(c+(()=>"../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js")+(()=>"../../../../uni_modules/mot-cascader/components/mot-cascader/mot-cascader.js"))();const c=()=>"../../../../components/mot-tip/index.js",m=e.defineComponent({__name:"index",setup(c){const{tabList:m,regionData:j,isOpened:f,onOpen:v,onChangeCity:p}=d.useAddressGlobal(),h=s.useUserStore(),q=["根据国家法律法规要求，寄件人姓名须与您提供的实名信息一致"],k=e.ref(o.JdAddressTypeEnum.SEND),b=e.ref({name:"",mobile:"",province:"",city:"",area:"",address:"",code:""}),{blurContent:y}=l.useJdInfoCheck(b),g=e.ref("");e.watch((()=>m.value),(e=>{const o=e.map((e=>e.name));b.value.province=(null==o?void 0:o[0])||"",b.value.city=(null==o?void 0:o[1])||"",b.value.area=(null==o?void 0:o[2])||"",g.value=o.join(" ")}),{immediate:!0,deep:!0});e.onLoad((e=>{var s,r;const{from:n}=e||{};k.value=Number(n)||o.JdAddressTypeEnum.SEND;const u=(null==(r=null==(s=h.jdOrderOpt)?void 0:s.data)?void 0:r[o.JdAddressTypeKey[k.value]])||{};console.log(o.JdAddressTypeKey[k.value]),(e=>{Object.keys(b.value).forEach((o=>{b.value[o]=(null==e?void 0:e[o])||""}))})(u);const{province:i,city:t,area:a}=b.value;g.value=`${i?i+" ":""}${t?t+" ":""}${a?a+" ":""}`}));const C=()=>{var e;if(!(b.value.name?!(u.isWhitespaceString(b.value.name,"请输入正确格式的真实姓名")||(b.value.mobile?!u.isNumber(b.value.mobile)||(b.value.province&&b.value.city?b.value.address?u.isWhitespaceString(b.value.name,"请输入正确格式的详细地址"):(t.toast("请填写详细地址"),1):(t.toast("请选择省市区"),1)):(t.toast("请填写电话号码"),1))):(t.toast("请填写真实姓名"),!1)))return;const s=(null==(e=h.jdOrderOpt)?void 0:e.data)||{},r=n.deepClone(s);r[o.JdAddressTypeKey[k.value]]=b.value,h.setJdOrderOpt({data:r}),a.navigateBack()},_=()=>{r.alert("确认要清空地址数据吗?").then((()=>{Object.keys(b.value).forEach((e=>{b.value[e]=""})),g.value=""}))},A=e.ref();return(s,r)=>({a:"overflow:"+(e.unref(f)?"hidden":"visible"),b:e.p({type:"warning",list:q}),c:e.unref(i.config).fileBaseUrl+(e.unref(k)===e.unref(o.JdAddressTypeEnum).SEND?"/jd/sender_info.png":"/jd/recipient_info.png"),d:e.t(e.unref(k)===e.unref(o.JdAddressTypeEnum).SEND?"寄件人":"收件人"),e:e.n(e.unref(b).name?"t-font-semibold":""),f:e.o((o=>e.unref(y)("name"))),g:e.unref(b).name,h:e.o((o=>e.unref(b).name=o.detail.value)),i:e.n(e.unref(b).mobile?"t-font-semibold":""),j:e.o((o=>e.unref(y)("mobile"))),k:e.unref(b).mobile,l:e.o((o=>e.unref(b).mobile=o.detail.value)),m:e.t(e.unref(g)?e.unref(g):"省市区"),n:e.n(e.unref(g)?"input-has-value":""),o:e.p({type:"right",size:"12",color:"#808080"}),p:e.o(((...o)=>e.unref(v)&&e.unref(v)(...o))),q:e.n(e.unref(b).address?"t-font-semibold":""),r:e.o((o=>e.unref(y)("address"))),s:e.unref(b).address,t:e.o((o=>e.unref(b).address=o.detail.value)),v:e.o(_),w:e.p({isBlock:!0,shape:"square",size:"large"}),x:e.o(C),y:e.sr(A,"35ca4365-3",{k:"ModalRef"}),z:e.p({id:"ModalRef"}),A:e.o(e.unref(p)),B:e.o((o=>e.unref(b).code=o)),C:e.o((o=>e.isRef(f)?f.value=o:null)),D:e.p({title:"请选择省市区",fieldNames:{text:"name",value:"code",children:"children"},"render-data":e.unref(j),modelValue:e.unref(b).code,visible:e.unref(f)})})}}),j=e._export_sfc(m,[["__scopeId","data-v-35ca4365"]]);wx.createPage(j);
