"use strict";const e=require("../../../../../common/vendor.js"),o=require("../../../../../utils/format.js");require("../../../../../local/index.js"),require("../../../../../hooks/uni-hooks/new-dialog.js"),require("../../../../../store/modules/app.js");const r=require("../../../../../store/modules/device.js");require("../../../../../store/modules/order.js");const s=require("../../../../../store/modules/user.js");require("../../../../../hooks/uni-hooks/dialog.js"),require("../../../../../hooks/uni-hooks/request.js"),require("../../../../../hooks/uni-hooks/wechat.js");const u=require("../../../../../api/user.js");require("../../../../../hooks/useCountryCode.js");const i=require("../../../../../hooks/use-mix.js"),t=require("../../../../../utils/order.js");if(require("../../../../../utils/uniAsync.js"),require("../../../../../utils/wx.log.js"),require("../../../../../utils/config/index.js"),require("../../../../../hooks/uni-hooks/unite.js"),require("../../../../../const/platform.js"),require("../../../../../shared/cache.js"),require("../../../../../const/cache.js"),require("../../../../../hooks/uni-hooks/cache.js"),require("../../../../../utils/config/env.js"),require("../../../../../uni_modules/mot-utils/index.js"),require("../../../../../theme/hooks/useTheme.js"),require("../../../../../theme/hooks/themeConfig.js"),require("../../../../../theme/hooks/themeKeys.js"),require("../../../../../api/device.js"),require("../../../../../api/order.js"),require("../../../../../const/order.js"),require("../../../../../hooks/uni-hooks/router.js"),require("../../../../../hooks/usePromise.js"),require("../../../../../api/delivery.js"),require("../../../../../shared/device.js"),require("../../../../../const/common.js"),require("../../../../../utils/appEnterVerif.js"),require("../../../../../hooks/use-common.js"),require("../../../../../hooks/uni-hooks/loading.js"),require("../../../../../hooks/uni-hooks/common.js"),require("../../../../../utils/url.js"),require("../../../../../hooks/uni-hooks/report.js"),require("../../../../../api/data.js"),require("../../../../../utils/precision.js"),require("../../../../../const/coupon.js"),!Array){(e.resolveComponent("mot-button")+e.resolveComponent("uni-popup"))()}Math||(n+a+(()=>"../../../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const n=()=>"../../../../../components/popup-header/index.js",a=()=>"../../../../../components/v2/jd/pay-rule/index.js",p=e.defineComponent({__name:"pay-popup",props:{data:{type:Object,default:()=>{}},orderData:{type:Object,default:()=>{}},loading:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},location:{type:String,default:""}},emits:["update:visible","update:loading","confirm"],setup(n,{emit:a}){const p=n,l=e.ref(),d=r.useDeviceStore();s.useUserStore();const c=e.computed((()=>d.cabinet)),m=e.computed({get:()=>p.loading,set:e=>a("update:loading",e)});e.watch((()=>p.visible),(async o=>{await e.nextTick$1(),o?(l.value&&l.value.open(),f()):l.value&&l.value.close()}),{immediate:!0}),e.ref(!1);const j=e.computed((()=>{const{paid:e,total_paid:o}=p.orderData;return t.showRechargeMoney({payed:e,money:o})})),h=async()=>{m.value||(m.value=!0,a("confirm"))},q=()=>{a("update:visible",!1)},k=e.ref(0),f=()=>{u.userApi.getSystemSetting("express_free_minutes").then((e=>{k.value=e.setting_val}))};return(r,s)=>{var u,t,a,p;return e.e({a:e.o(q),b:e.p({title:"确认下单"}),c:e.t(n.location),d:e.t(e.unref(o.fullLockerName)(null==(u=n.data)?void 0:u.locker_name,null==(t=e.unref(c))?void 0:t.address)),e:e.t(e.unref(i.useToYuan)(null==(a=n.orderData)?void 0:a.total_paid)),f:e.unref(j)>0},e.unref(j)>0?{g:e.t(`(余额支付：${e.unref(i.useToYuan)(e.unref(j))})`)}:{},{h:e.p({payRule:n.orderData.payRule,expressFreeMinutes:e.unref(k)}),i:e.t(e.unref(i.useToYuan)(null==(p=n.orderData)?void 0:p.paid)),j:e.o(h),k:e.p({isBlock:!0,shape:"square",loading:e.unref(m),size:"large"}),l:e.sr(l,"d6a403b6-0",{k:"popup"}),m:e.p({type:"bottom","safe-area":!1,"is-mask-click":!1})})}}}),l=e._export_sfc(p,[["__scopeId","data-v-d6a403b6"]]);wx.createComponent(l);
