"use strict";const e=require("../../../../../common/vendor.js"),o=require("../../../../../utils/clone.js");require("../../../../../local/index.js"),require("../../../../../hooks/uni-hooks/new-dialog.js"),require("../../../../../store/modules/app.js"),require("../../../../../store/modules/device.js"),require("../../../../../store/modules/order.js");const s=require("../../../../../store/modules/user.js");require("../../../../../hooks/uni-hooks/dialog.js"),require("../../../../../hooks/uni-hooks/request.js"),require("../../../../../hooks/uni-hooks/wechat.js"),require("../../../../../hooks/useCountryCode.js");const r=require("../../../../../hooks/use-mix.js"),i=require("../../../../../utils/precision.js");require("../../../../../utils/uniAsync.js"),require("../../../../../utils/wx.log.js");const u=require("../../../../../utils/config/index.js"),n=require("../../../../../hooks/business/use-jd-info-check.js");if(require("../../../../../hooks/uni-hooks/unite.js"),require("../../../../../const/platform.js"),require("../../../../../shared/cache.js"),require("../../../../../const/cache.js"),require("../../../../../hooks/uni-hooks/cache.js"),require("../../../../../utils/config/env.js"),require("../../../../../uni_modules/mot-utils/index.js"),require("../../../../../theme/hooks/useTheme.js"),require("../../../../../theme/hooks/themeConfig.js"),require("../../../../../theme/hooks/themeKeys.js"),require("../../../../../api/device.js"),require("../../../../../api/order.js"),require("../../../../../api/user.js"),require("../../../../../const/order.js"),require("../../../../../hooks/uni-hooks/router.js"),require("../../../../../hooks/usePromise.js"),require("../../../../../api/delivery.js"),require("../../../../../shared/device.js"),require("../../../../../const/common.js"),require("../../../../../utils/appEnterVerif.js"),require("../../../../../hooks/use-common.js"),require("../../../../../hooks/uni-hooks/loading.js"),require("../../../../../hooks/uni-hooks/common.js"),require("../../../../../utils/url.js"),require("../../../../../hooks/uni-hooks/report.js"),require("../../../../../api/data.js"),require("../../../../../utils/format.js"),require("../../../../../utils/is.js"),!Array){(e.resolveComponent("mot-button")+e.resolveComponent("uni-popup"))()}Math||(t+(()=>"../../../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const t=()=>"../../../../../components/popup-header/index.js",a=e.defineComponent({__name:"worth-popup",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},emits:["update:visible","refresh"],setup(t,{emit:a}){const l=t,{isMpWeixin:d}=u.config,p=s.useUserStore(),h=e.ref(),c=e.ref({paddingBottom:"0px",guaranteeMoney:null}),{blurContent:j}=n.useJdInfoCheck(c),m=e=>{console.log("-------height-----",e),c.value.paddingBottom=e/2+"px"};e.watch((()=>l.visible),(async o=>{var s;if(await e.nextTick$1(),o){const o=(null==(s=l.data)?void 0:s.data)||{},i=(null==o?void 0:o.guarantee_money)||null;c.value.guaranteeMoney=i?r.useToYuan(i,!1):null,h.value&&h.value.open(),e.index.onKeyboardHeightChange((e=>{console.log("-------res.height-----",e.height),e.height?m(e.height):m(0)}))}else h.value&&h.value.close(),e.index.offKeyboardHeightChange()}),{immediate:!0});const q=async()=>{m(0),j("guaranteeMoney")},k=async()=>{var e;await q();const s=(null==(e=p.jdOrderOpt)?void 0:e.data)||{},r=o.deepClone(s),{guaranteeMoney:u}=c.value;r.guarantee_money=u?i.toFen(Number(u)):0,p.setJdOrderOpt({data:r}),g(),a("refresh")},g=()=>{a("update:visible",!1)};return(o,s)=>({a:e.o(g),b:e.p({title:"请输入实际货物价值"}),c:e.n(e.unref(c).guaranteeMoney?"t-font-semibold":""),d:e.o(q),e:e.unref(c).guaranteeMoney,f:e.o((o=>e.unref(c).guaranteeMoney=o.detail.value)),g:e.o(k),h:e.p({isBlock:!0,shape:"square",size:"large"}),i:e.unref(d)?e.unref(c).paddingBottom:"0px",j:e.sr(h,"194b99ed-0",{k:"popup"}),k:e.p({type:"bottom","safe-area":!1,"is-mask-click":!1})})}}),l=e._export_sfc(a,[["__scopeId","data-v-194b99ed"]]);wx.createComponent(l);
