"use strict";const e=require("../../common/vendor.js");require("../../local/index.js");const r=require("../../hooks/uni-hooks/new-dialog.js");require("../../store/modules/app.js"),require("../../store/modules/device.js"),require("../../store/modules/order.js");const o=require("../../store/modules/user.js");require("../../hooks/uni-hooks/dialog.js"),require("../../hooks/uni-hooks/request.js");const s=require("../../hooks/uni-hooks/wechat.js"),u=require("../../api/coupon.js");require("../../hooks/useCountryCode.js");const i=require("../../hooks/use-mix.js");require("../../utils/uniAsync.js"),require("../../utils/wx.log.js");const n=require("../../utils/config/index.js");require("../../hooks/uni-hooks/unite.js"),require("../../const/platform.js"),require("../../shared/cache.js"),require("../../const/cache.js"),require("../../hooks/uni-hooks/cache.js"),require("../../utils/config/env.js"),require("../../uni_modules/mot-utils/index.js"),require("../../theme/hooks/useTheme.js"),require("../../theme/hooks/themeConfig.js"),require("../../theme/hooks/themeKeys.js"),require("../../api/device.js"),require("../../api/order.js"),require("../../api/user.js"),require("../../const/order.js"),require("../../hooks/uni-hooks/router.js"),require("../../hooks/usePromise.js"),require("../../api/delivery.js"),require("../../shared/device.js"),require("../../const/common.js"),require("../../utils/appEnterVerif.js"),require("../../hooks/use-common.js"),require("../../hooks/uni-hooks/loading.js"),require("../../hooks/uni-hooks/common.js"),require("../../utils/url.js"),require("../../hooks/uni-hooks/report.js"),require("../../api/data.js"),require("../../utils/precision.js"),Math||t();const t=()=>"./components/pre-order-popup/index.js",a=e.defineComponent({__name:"buy",setup(t){const a=o.useUserStore(),c=e.ref({img_url:"",price:0}),l=e=>{const r=e.target.current||e.detail.current;h(r)},d=()=>{if(s.envEvent.report.commonClk("权益购买页_立即升级_按钮点击"),c.value.price>a.user.balance)return s.envEvent.report.commonExp("权益购买页_无法购买账户余额不足提示_曝光"),void r.alert("无法升级，账户余额不足");s.envEvent.report.commonExp("权益购买页_确认升级弹窗_曝光"),f.value=!0},j=e.ref([]),p=e.ref(0);e.onLoad((async({id:e})=>{s.envEvent.report.addPage({page_name:"a_page_vip_buy_view"});const{data:r}=await u.vipApi.get();j.value=r;let o=j.value.findIndex((r=>r.id===e));-1===o&&(o=0),h(o)}));const q=e.ref(0),h=r=>{p.value=r,c.value=j.value[r],q.value=1,e.nextTick$1((()=>{q.value=0}))},{showPreOrderPopup:f}={showPreOrderPopup:e.ref(!1)};return(r,o)=>{var s;return{a:e.f(e.unref(j),((r,o,s)=>{var u,i,t;return{a:e.unref(n.config).fileBaseUrl+r.icon,b:e.t(r.name),c:(null==(u=e.unref(c))?void 0:u.id)===r.id?1:"",d:(null==(i=e.unref(c))?void 0:i.id)===r.id?r.bg_color:"transparent",e:r.name,f:e.s((null==(t=e.unref(c))?void 0:t.id)===r.id?{backgroundColor:r.bg_color}:{}),g:e.o((e=>h(o)),r.name)}})),b:e.f(e.unref(j),((r,o,s)=>({a:e.unref(n.config).fileBaseUrl+r.img_url,b:o}))),c:e.unref(q),d:e.o(l),e:e.unref(p),f:e.unref(n.config).fileBaseUrl+"/vip/button-bg.png",g:e.t(e.unref(i.useToYuan)(null==(s=e.unref(c))?void 0:s.price)),h:e.o(d),i:e.o((r=>e.isRef(f)?f.value=r:null)),j:e.p({orderInfo:e.unref(c),modelValue:e.unref(f)})}}}}),c=e._export_sfc(a,[["__scopeId","data-v-d832853f"]]);wx.createPage(c);
