"use strict";const e=require("../common/vendor.js"),o=require("../local/index.js");require("./uni-hooks/new-dialog.js"),require("../store/modules/app.js"),require("../store/modules/device.js"),require("../store/modules/order.js"),require("../store/modules/user.js");const r=require("./uni-hooks/dialog.js");require("./uni-hooks/request.js");const s=require("./uni-hooks/wechat.js");require("./useCountryCode.js"),require("../utils/uniAsync.js"),require("../utils/wx.log.js");const i=require("../utils/config/index.js");exports.useUploadImage=function(u,n="avatar"){return new Promise(((a,l)=>{r.showLoading(o.t("hooks.useUpload.2"));const t=(e=>{const{uploadURL:o,prefix:r}=i.config.api;return`${o}/${r}/files/${e}/upload/`})(n),d={"Xi-App-Id":i.config.api.xAppId};console.log(t),e.index.uploadFile({url:t,filePath:u,name:"file",header:d,success:e=>{429===e.statusCode?(s.envEvent.report.error(`useUploadImage:${e.errMsg}`),l(e.data)):a(e.data.replace(/"/g,"")),console.log(e.data.replace(/"/g,"")),console.log(e,"res-uploadFile")},fail:e=>{s.envEvent.report.error(`useUploadImage:${e}`),l(e)},complete:()=>{r.hideLoading()}})}))};
