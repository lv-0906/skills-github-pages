"use strict";var e=Object.defineProperty,s=(s,r,n)=>(((s,r,n)=>{r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n})(s,"symbol"!=typeof r?r+"":r,n),n);const r=require("../../common/vendor.js"),n=require("../../local/index.js"),o=require("./common.js"),i=require("./dialog.js");require("./request.js"),require("../../store/modules/app.js"),require("../../store/modules/device.js"),require("../../store/modules/order.js"),require("../../store/modules/user.js"),require("../useCountryCode.js"),require("../../utils/uniAsync.js");const t=require("../../utils/url.js");require("../../utils/wx.log.js"),require("../../utils/config/index.js");const c=require("./report.js"),{VITE_WX_APP_APPKEY:a,VITE_WX_APP_TRACKDOMAIN:u,VITE_WX_APP_ID:_}={VITE_PUBLIC_PATH:"/",VITE_API_BASE_URL:"https://locker-api.wegui.cn",VITE_API_UPLOAD_URL:"https://admin3-file.wegui.cn",VITE_API_PREFIX:"v1",VITE_API_HEAD_APP_ID:"0a60f00b28c849d3ac529994f98b825f",VITE_API_HEAD_API_KEY:"b095133306c0948b21df8aa66968635e",VITE_APP_NAME:"components.business.privacy-popup.index.4",VITE_AES_KEY:"2956159971c06af8fdff63edd932e7d1",VITE_BUSINESS_MONEY_UNIT:"¥",VITE_WX_APP_ID:"wx8af938e71b256cd0",VITE_WX_APP_APPKEY:"c0ax41al61eomjxyclbp4e9t",VITE_WX_APP_TRACKDOMAIN:"quickaplus-he-api-cn-shanghai.aliyuncs.com",VITE_ALIPAY_APP_ID:"2021003186676235",VITE_ALIPAY_APP_APPKEY:"okelnd1s2w1ltopg67ijm0t6",VITE_ALIPAY_APP_TRACKDOMAIN:"quickaplus-he-api-cn-shanghai.aliyuncs.com",VITE_H5_APP_ID:"1762735967245774848",VITE_H5_APP_APPKEY:"p1mznskb3dzsv72jnuuv5fvz",VITE_H5_TRACKDOMAIN:"quickaplus-he-api-cn-shanghai.aliyuncs.com",VITE_THEME:"yellow",VITE_ENV:"main",VITE_THEME_FILE_URL:"https://web-file.xironiot.com/xiaoiron/client-mini/static/images",VITE_CLIENT_ID:"609fa3591fd607c161a5a7199482ee4d",VITE_MIXC_APP_ID:"wxba87b4745a379754",VITE_REPORT_LOG:"false",VITE_ROOT_DIR:"D:\\project\\xiaoicon\\web_client_mini",VITE_UNI_PLATFORM:"MP-WEIXIN",VITE_USER_NODE_ENV:"production",BASE_URL:"/",MODE:"development",DEV:!1,PROD:!0,SSR:!1};const l=new class{constructor(){s(this,"report"),this.report=c.createReport({appKey:a,trackDomain:u,envEvent:r.wx$1,platform:"wx",appId:_})}login(){return new Promise(((e,s)=>{r.index.login({success:r=>{const{code:n}=r||{};n||s({code:"10001",message:"wx login code is null"}),e(n)},fail:s})}))}getScene({query:e,referrerInfo:s,scene:r}){var n;if(e){const{q:o,page:i}=e;if(o){return t.getQueryParamsPages(o)}if(1194===r||1167===r){const s=`?${Object.keys(e)[0]||""}`;return t.getQueryParamsPages(s)}const c=null==(n=null==s?void 0:s.extraData)?void 0:n.q;if(c){return t.getQueryParamsPages(c)}if(i){const[s,r,n]=i.split("_");return{id:r,...e,page:s,locker_scene:n}}}return{}}getDataId(e){const{query:s,scene:r}=e;return 1035===r&&s.dataId?s.dataId:null}subscribeMessage(e){return console.log("subscribeMessage tmplIds:",e),new Promise(((s,n)=>{r.index.requestSubscribeMessage({tmplIds:e,success:e=>{console.log("requestSubscribeMessage.success:",e),s(e)},fail:e=>{console.log("requestSubscribeMessage.error:",e),n(e)}})}))}officialAccountScene(e=!1){const s=[1011,1017,1025,1047,1124];return e?[1001,1038,1041,1089,1090,1104,1131,1187,...s]:s}getPrivacySetting(){return new Promise(((e,s)=>{r.wx$1.getPrivacySetting({success(s){s.needAuthorization?(console.log("需要授权"),e(!0)):(console.log("不需要授权"),e(!1))},fail(s){console.error("获取隐私设置失败",s),e(!0)}})}))}openPrivacyContract(){r.wx$1.openPrivacyContract({success:()=>{},fail:()=>{},complete:()=>{}})}async exitMiniProgram(){return new Promise(((e,s)=>{e(!0),i.dialog.showModal({content:n.t("components.business.privacy-popup.index.13"),showCancel:!1}).then((()=>{r.wx$1.exitMiniProgram()}))}))}scanCode(e="home"){return new Promise(((s,n)=>{r.index.scanCode({success:r=>{const{result:n}=r,i=o.handleManualScanInfo(n,e);if(i)return s(i)},fail:n})}))}},P=new Proxy(l,{get:(e,s,r)=>"function"==typeof e[s]?function(...r){return console.log(`Calling method: ${String(s)}`),e[s](...r)}:Reflect.get(e,s,r)});exports.envEvent=P;
