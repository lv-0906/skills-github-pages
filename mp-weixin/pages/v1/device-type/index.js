"use strict";const e=require("../../../common/vendor.js"),o=require("../../../const/order.js"),r=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js");const t=require("../../../store/modules/device.js");require("../../../store/modules/order.js");const i=require("../../../store/modules/user.js");require("../../../utils/uniAsync.js"),require("../../../utils/wx.log.js");const s=require("../../../utils/config/index.js");require("../../../hooks/uni-hooks/dialog.js"),require("../../../hooks/uni-hooks/request.js");const n=require("../../../hooks/uni-hooks/router.js"),u=require("../../../hooks/uni-hooks/unite.js"),c=require("../../../hooks/uni-hooks/wechat.js"),l=require("../../../hooks/useWechatSI.js");require("../../../hooks/useCountryCode.js");const a=require("../../../shared/device.js"),p=require("../../../theme/hooks/useTheme.js");if(require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../const/platform.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../api/device.js"),require("../../../api/order.js"),require("../../../api/user.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),require("../../../const/common.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("mot-modal"))()}Math||(d+(()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const d=()=>"../../../components/mot-site/index.js",m=e.defineComponent({__name:"index",setup(d){const{autoPlay:m}=l.useWechatSI(),v=t.useDeviceStore(),_=i.useUserStore(),{themeConfig:y}=p.useTheme(),k=y.value["$border-color"],g=e.computed((()=>_.language)),f=e.computed((()=>v.lockerTypeText)),h=e.reactive({site:v.site,cabinet:v.cabinet,deviceTypes:[{type:o.lockerTypeEnum.S,name:r.t("v1_device_type.s.name"),count:0,desc:r.t("v1_device_type.s.description"),img:s.config.fileBaseUrl+"/locker/locker_s.png",imgEmpty:s.config.fileBaseUrl+"/locker/locker_s_empty.png"},{type:o.lockerTypeEnum.M,name:r.t("v1_device_type.m.name"),count:0,desc:r.t("v1_device_type.m.description"),img:s.config.fileBaseUrl+"/locker/locker_m.png",imgEmpty:s.config.fileBaseUrl+"/locker/locker_m_empty.png"},{type:o.lockerTypeEnum.L,name:r.t("v1_device_type.l.name"),count:0,desc:r.t("v1_device_type.l.description"),img:s.config.fileBaseUrl+"/locker/locker_l.png",imgEmpty:s.config.fileBaseUrl+"/locker/locker_l_empty.png"},{type:o.lockerTypeEnum.EL,name:r.t("v1_device_type.el.name"),count:0,desc:r.t("v1_device_type.el.description"),img:s.config.fileBaseUrl+"/locker/locker_el.png",imgEmpty:s.config.fileBaseUrl+"/locker/locker_el_empty.png"}],timeType:_.orderOpt.rental_period||o.RentalPeriodEnum.SHORT_RENTAL}),j=e.computed((()=>v.locker_count_map)),q=e.computed((()=>v.locker_types)),T=e.computed((()=>v.rentalPeriodMap)),E=e.computed((()=>{let e=(null==h?void 0:h.deviceTypes)||[];if(b.value){const o=T.value[h.timeType];e=e.filter((e=>o&&(null==o?void 0:o.includes(e.type))))}return e})),b=e.computed((()=>a.hasLongShortRentalPeriod(T.value)));e.onLoad((()=>{c.envEvent.report.addPage("a_page_locker_type_view"),m(r.t("sub-pages.v1.device-type.index.1")),P(),u.unite.setNavigationBarTitle(r.t("sub-pages.order.deposit.index.39"))}));const x=e=>{h.timeType=e},P=()=>{h.deviceTypes=h.deviceTypes.map((e=>{var o,r;const t=j.value[e.type],i=(null==(r=null==(o=f.value)?void 0:o[e.type])?void 0:r[g.value])||e.desc;return{...e,count:t,desc:i}})).filter((e=>q.value.includes(e.type)))},R=e.ref();return(t,i)=>e.e({a:e.p({"show-disclaimer":!0}),b:e.unref(b)},e.unref(b)?{c:e.t(e.unref(r.t)("v1_device_type.rental_period_select")),d:e.t(e.unref(r.t)("order.detail.rental_period_short")),e:e.o((e=>x(1))),f:e.n(e.unref(h).timeType===e.unref(o.RentalPeriodEnum).SHORT_RENTAL?"active":""),g:e.t(e.unref(r.t)("order.detail.rental_period_long")),h:e.o((e=>x(2))),i:e.n(e.unref(h).timeType===e.unref(o.RentalPeriodEnum).LONG_RENTAL?"active":"")}:{},{j:e.f(e.unref(E),((o,t,i)=>e.e({a:o.count>0?o.img:o.imgEmpty,b:e.t(o.name),c:e.t(o.count),d:e.t(o.desc),e:!o.count},o.count?{}:{f:e.t(e.unref(r.t)("sub-pages.v1.device-type.index.2")),g:e.o((e=>{return r=o.type,c.envEvent.report.addPage({page_name:"a_page_device_nearby_view",full_cabinet_entrance_type:"choose"}),void n.navigateTo(`/sub-pages/common/device-nearby/index?type=${r}`);var r}),o.type)},{h:o.count>0},o.count>0?{i:"e63e22f7-1-"+i,j:e.p({type:"forward",size:"10",color:e.unref(k)})}:{},{k:o.type,l:e.n(o.count>0?"":"disabled"),m:e.o((e=>(({count:e,type:o})=>{e>0&&(c.envEvent.report.addGlobal({cabinetdoor_type:o}),_.setOrderOpt({locker_type:o,rental_period:h.timeType}),v.goNextPage(3))})(o)),o.type)}))),k:e.t(e.unref(r.t)("v1_device_type.available")),l:e.sr(R,"e63e22f7-2",{k:"ModalRef"}),m:e.p({id:"ModalRef"})})}}),v=e._export_sfc(m,[["__scopeId","data-v-e63e22f7"]]);wx.createPage(v);
