"use strict";const e=require("../../../common/vendor.js"),o=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js"),require("../../../store/modules/device.js"),require("../../../store/modules/order.js");const s=require("../../../store/modules/user.js");require("../../../utils/uniAsync.js");const i=require("../../../utils/validate.js");require("../../../utils/wx.log.js");const r=require("../../../utils/config/index.js"),n=require("../../../hooks/uni-hooks/dialog.js"),u=require("../../../hooks/uni-hooks/emitKey.js");require("../../../hooks/uni-hooks/request.js");const t=require("../../../hooks/uni-hooks/router.js"),a=require("../../../hooks/uni-hooks/unite.js");require("../../../hooks/uni-hooks/wechat.js"),require("../../../hooks/useCountryCode.js");const c=require("../../../api/user.js");require("../../../shared/order.js"),require("../../../shared/pay.js");const l=require("../../../shared/three.js");if(require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../const/platform.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../theme/hooks/useTheme.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),require("../../../api/device.js"),require("../../../api/order.js"),require("../../../const/order.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),require("../../../hooks/useWechatSI.js"),require("../../../hooks/use-keyval/index.js"),require("../../../const/coupon.js"),require("../../../utils/is.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("mot-modal"))()}Math||((()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../node-modules/@dcloudio/uni-ui/lib/uni-list-item/uni-list-item.js")+(()=>"../../../node-modules/@dcloudio/uni-ui/lib/uni-list/uni-list.js")+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const m=e.defineComponent({__name:"index",setup(m){const h=r.config.fileBaseUrl+"/avatar.png",p=s.useUserStore(),d=e.computed({get:()=>(console.log(p.user),p.user),set(e){p.setUserInfo(e)}}),f=e.reactive({isAnLv:r.config.isAnLv});e.onLoad((()=>{j()}));const g=e.computed((()=>d.value.enable_vip_package&&d.value.has_vip_package_order));e.onShow((()=>{a.unite.setNavigationBarTitle(o.t("v1_me.title")),e.index.$once(u.EMIT_REFRESH_ME,(()=>{j()}))})),e.onPullDownRefresh((()=>{j(!0)}));const j=async(e=!1)=>{const{releaseVersion:o}=p.sceneInfo;console.log("测试releaseVersion:",o);const s={mini_program_version:o};c.userApi.get(s,!1,!1).then((e=>{d.value=e})).finally((()=>{q(e)}))},q=s=>{s&&(e.index.stopPullDownRefresh(),n.toast(o.t("pages.person.index.7")))},v=e.ref([{show:!0,icon:r.config.fileBaseUrl+"/icon/icon_order.png",title:"v1_me.order",to:"/sub-pages/me/order/index"},{show:!0,icon:r.config.fileBaseUrl+"/icon/icon_withdrawal.png",title:"v1_me.withdraw",to:"/sub-pages/me/withdraw/index"},{show:!0,icon:r.config.fileBaseUrl+"/icon/icon_coupon.png",title:"v1_me.coupon",to:"/sub-pages/me/coupon/index"},{show:!0,icon:r.config.fileBaseUrl+"/icon/icon_help.png",title:"v1_me.help",to:"/sub-pages/me/help/index"},{show:!0,icon:r.config.fileBaseUrl+"/me/feature.png",title:"v1_me.feature",to:"/sub-pages/me/feature/index"},{show:!f.isAnLv,icon:r.config.fileBaseUrl+"/me/cooperation.png",title:"v1_me.cooperation",to:"/sub-pages/me/cooperation/index"},{show:!f.isAnLv,icon:r.config.fileBaseUrl+"/me/express.png",title:"v1_me.express",to:"/sub-pages/v2/xd/home/index"}]),k=e.ref(),_=()=>{t.navigateTo(`/sub-pages/activity-vip/webview?url=${encodeURIComponent(l.getTkTokenUrl())}`)};return(s,n)=>e.e({a:e.unref(r.config).fileBaseUrl+"/me/me_bg.png",b:e.unref(d).avatar_url?e.unref(d).avatar_url:h,c:e.t(e.unref(d).nickname||e.unref(o.t)("v1_me.nickname")),d:e.t(e.unref(i.hide4Phone)(e.unref(d).phone||"")),e:e.o((o=>e.unref(t.navigateTo)("/sub-pages/me/profile/index"))),f:e.unref(g)},e.unref(g)?{g:e.unref(r.config).fileBaseUrl+"/vip/crown.png",h:e.p({type:"right",size:"16",color:"#bbb"}),i:e.o(_)}:{},{j:e.f(e.unref(v).filter((e=>e.show)),((s,i,r)=>({a:s.title,b:"0011ca2c-2-"+r+",0011ca2c-1",c:e.p({title:e.unref(o.t)(s.title),thumb:s.icon,link:!0,to:s.to,showArrow:!0,"thumb-size":"sm"})}))),k:e.unref(r.config).fileBaseUrl+"/me/service.svg",l:e.t(e.unref(o.t)("v1_me.service")),m:e.p({type:"right",size:"16",color:"#bbb"}),n:e.p({border:!1}),o:e.sr(k,"0011ca2c-4",{k:"ModalRef"}),p:e.p({id:"ModalRef"})})}}),h=e._export_sfc(m,[["__scopeId","data-v-0011ca2c"]]);wx.createPage(h);
