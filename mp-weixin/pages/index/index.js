"use strict";const e=require("../../common/vendor.js"),o=require("../../local/index.js");require("../../store/modules/app.js");const s=require("../../store/modules/device.js");require("../../store/modules/order.js");const r=require("../../store/modules/user.js");require("../../shared/order.js"),require("../../shared/pay.js"),require("../../hooks/uni-hooks/new-dialog.js"),require("../../utils/uniAsync.js"),require("../../utils/wx.log.js"),require("../../utils/config/index.js"),require("../../hooks/uni-hooks/dialog.js"),require("../../hooks/uni-hooks/request.js");const i=require("../../hooks/uni-hooks/router.js"),u=require("../../hooks/uni-hooks/wechat.js"),n=require("../../hooks/use-common.js");require("../../hooks/useCountryCode.js");const t=require("../../shared/cache.js"),a=require("../../utils/scene.js");if(require("../../hooks/uni-hooks/unite.js"),require("../../const/platform.js"),require("../../utils/config/env.js"),require("../../api/device.js"),require("../../api/order.js"),require("../../api/user.js"),require("../../const/order.js"),require("../../hooks/usePromise.js"),require("../../api/delivery.js"),require("../../shared/device.js"),require("../../const/common.js"),require("../../utils/appEnterVerif.js"),require("../../hooks/useWechatSI.js"),require("../../hooks/use-keyval/index.js"),require("../../const/coupon.js"),require("../../utils/is.js"),require("../../uni_modules/mot-utils/index.js"),require("../../theme/hooks/useTheme.js"),require("../../theme/hooks/themeConfig.js"),require("../../theme/hooks/themeKeys.js"),require("../../hooks/uni-hooks/loading.js"),require("../../hooks/uni-hooks/common.js"),require("../../utils/url.js"),require("../../hooks/uni-hooks/report.js"),require("../../api/data.js"),require("../../const/cache.js"),require("../../hooks/uni-hooks/cache.js"),!Array){e.resolveComponent("mot-modal")()}Math||(c+d+(()=>"../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const c=()=>"../../components/loading/index.js",d=()=>"../../components/business/privacy-popup/index.js",l=e.defineComponent({__name:"index",setup(c){const d=r.useUserStore(),l=s.useDeviceStore(),h=e.ref(!1);e.onLoad((()=>{u.envEvent.getPrivacySetting().then((e=>{e?h.value=!0:j()}))}));const j=async()=>{await async function(){if(!t.getTokenStorage()){const{id:e,page:o}=d;if(!(await d.login(e&&"home"===o?e:"")))return void i.reLaunch("/sub-pages/common/login/index");n.useGlobalUserInfo(),q()}q()}();const e=t.getLanguageStorage();u.envEvent.report.addGlobal({lang:e}),o.changeLanguage(e)};const q=async()=>{const{id:e,page:o,sceneInfo:s}=d;if(e&&"create"===o)try{await l.fetchCabinet({id:e,locker_scene:null==s?void 0:s.locker_scene}),l.goNextPage(1,{routeway:i.redirectTo,nearby:!0,follow:!1})}catch(r){const e=setTimeout((()=>{clearTimeout(e),i.reLaunch("/pages/v1/index/index")}),2e3)}else a.entry()},m=e.ref();return(s,r)=>({a:e.t(e.unref(o.t)("components.mot-loading.index.1")),b:e.o(j),c:e.o((o=>e.isRef(h)?h.value=o:null)),d:e.p({modelValue:e.unref(h)}),e:e.sr(m,"1be9c96a-2",{k:"ModalRef"}),f:e.p({id:"ModalRef"})})}}),h=e._export_sfc(l,[["__scopeId","data-v-1be9c96a"]]);wx.createPage(h);
