"use strict";const e=require("../../../common/vendor.js"),r=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js"),require("../../../store/modules/device.js"),require("../../../store/modules/order.js"),require("../../../store/modules/user.js");const u=require("../../../utils/format.js"),s=require("../../../const/order.js");require("../../../utils/uniAsync.js"),require("../../../utils/wx.log.js");const t=require("../../../utils/config/index.js"),n=require("../../../hooks/uni-hooks/dialog.js"),o=require("../../../hooks/uni-hooks/emitKey.js");require("../../../hooks/uni-hooks/request.js");const i=require("../../../hooks/uni-hooks/router.js"),d=require("../../../hooks/uni-hooks/unite.js");require("../../../hooks/uni-hooks/wechat.js");const l=require("../../../hooks/useWechatSI.js");require("../../../hooks/useCountryCode.js");const a=require("../../../hooks/useResultPageReturn.js"),f=require("../../../hooks/use-mix.js"),c=require("../../../api/order.js"),m=require("../../../theme/hooks/useTheme.js"),E=require("../../../hooks/useAd.js");if(require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../const/platform.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../api/device.js"),require("../../../api/user.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),require("../../../utils/precision.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("mot-button")+e.resolveComponent("mot-modal"))()}Math||((()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+O+(()=>"../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../uni_modules/mot-modal/components/mot-modal/mot-modal.js"))();const O=()=>"./components/evaluate-card/index.js",g=e.defineComponent({__name:"index",setup(O){const{autoPlay:g}=l.useWechatSI(),{themeConfig:p}=m.useTheme(),h=p.value["$danger-color"],k=p.value["$success-color"],R=p.value["$text-color-disabled"],j={[s.OrderResultEnum.CREATE]:{playMsg:r.t("sub-pages.order.result.index.7"),btnText:r.t("order.result.btn.default"),title:r.t("order.result.status.create"),desc:r.t("order.result.desc.default")},[s.OrderResultEnum.UNLOCK]:{playMsg:r.t("sub-pages.order.result.index.11"),btnText:r.t("order.result.btn.unlock"),title:r.t("order.result.status.forget"),desc:r.t("order.result.desc.default")},[s.OrderResultEnum.FORGET]:{playMsg:r.t("sub-pages.order.result.index.12"),btnText:r.t("order.result.btn.forget"),title:r.t("order.result.status.forget"),desc:r.t("order.result.desc.forget")},[s.OrderResultEnum.DONE]:{playMsg:r.t("sub-pages.order.result.index.14"),btnText:r.t("order.result.btn.done"),title:r.t("order.result.status.done"),desc:r.t("order.result.desc.done")},[s.OrderResultEnum.RESERVE]:{playMsg:r.t("sub-pages.common.pay-center.index.15"),btnText:r.t("order.result.btn.done"),title:r.t("sub-pages.common.pay-center.index.15"),desc:""},[s.OrderResultEnum.LONG_UNLOCK]:{playMsg:r.t("order.result.status.forget"),btnText:r.t("order.result.btn.default"),title:r.t("order.result.status.forget"),desc:r.t("order.result.desc.default")}},{clickAd:q}=E.uesAd(),b=e.reactive({order:{},from:s.OrderResultEnum.CREATE}),{navigatorBackDelta:v,navigatorBackPage:x}=a.handleNavigateHook();e.onLoad((async e=>{const{orderId:u,from:t=s.OrderResultEnum.CREATE}=e||{};b.from=t,await N(u),d.unite.setNavigationBarTitle(r.t("pages.order_information"))})),e.onShow((()=>{e.index.hideHomeButton()}));const N=async e=>{b.order=await c.lockerOrderApi.get(e),_()},T=e.computed((()=>{const e=b.from;return{btnText:j[e].btnText,title:j[e].title,desc:j[e].desc}})),_=()=>{const e=j[b.from].playMsg;e&&g(e)},y=()=>{L(),isNaN(v.value)?i.goHome().then((()=>{e.index.$emit(o.EMIT_REFRESH_HOME)})):x()},L=()=>{switch(b.from){case s.OrderResultEnum.FORGET:break;case s.OrderResultEnum.LONG_UNLOCK:case s.OrderResultEnum.UNLOCK:q("open_door_success_ad");break;case s.OrderResultEnum.DONE:q("end_storage_success_ad");break;case s.OrderResultEnum.CREATE:q("order_success_ad")}},{order:C,from:M}=e.toRefs(b),D=e.ref();return(o,i)=>{var d,l,a,m,E,O;return e.e({a:e.t(e.unref(C).id),b:e.p({size:"28",type:e.unref(M)===e.unref(s.OrderResultEnum).DONE?"minus":"checkbox",color:e.unref(M)===e.unref(s.OrderResultEnum).DONE?e.unref(h):e.unref(k)}),c:e.t(e.unref(T).title),d:e.t(e.unref(M)===e.unref(s.OrderResultEnum).UNLOCK||e.unref(M)===e.unref(s.OrderResultEnum).FORGET?e.unref(r.t)("order.result.lockerMessage.yourLockerIs"):e.unref(r.t)("order.result.lockerMessage.yourLockerNumber")),e:e.unref(C).info},e.unref(C).info?{f:e.t(e.unref(u.fullLockerName)(e.unref(C).info.locker_name,e.unref(C).info.cabinet_address))}:{},{g:e.unref(M)===e.unref(s.OrderResultEnum).UNLOCK&&e.unref(C).status===e.unref(s.OrderStatusEnum).Progressing},e.unref(M)===e.unref(s.OrderResultEnum).UNLOCK&&e.unref(C).status===e.unref(s.OrderStatusEnum).Progressing?{h:e.t(e.unref(r.t)("order.result.desc.unlock.desc")),i:e.t(e.unref(u.numberToZhTime)(e.unref(C).used_time)),j:e.t(e.unref(r.t)("order.result.desc.unlock.tip"))}:{k:e.t(e.unref(T).desc)},{l:e.unref(M)===e.unref(s.OrderResultEnum).DONE},e.unref(M)===e.unref(s.OrderResultEnum).DONE?{m:e.t(e.unref(r.t)("order.result.formLabels.usageDuration")),n:e.t(e.unref(u.numberToZhTime)(e.unref(C).used_time)),o:e.t(e.unref(r.t)("order.result.formLabels.actualPayment")),p:e.t(e.unref(f.useToYuan)(e.unref(C).payed)),q:e.t(e.unref(r.t)("order.result.formLabels.viewDetails")),r:e.p({type:"right",size:"28",color:e.unref(R)}),s:`/sub-pages/order/detail/index?orderId=${e.unref(C).id}`}:{},{t:e.unref(M)===e.unref(s.OrderResultEnum).RESERVE},e.unref(M)===e.unref(s.OrderResultEnum).RESERVE?{v:e.t(e.unref(r.t)("pages.v1.index.components.order-item.1")),w:e.t(`${(null==(d=e.unref(C).info)?void 0:d.province)||""}${(null==(l=e.unref(C).info)?void 0:l.city)||""}${(null==(a=e.unref(C).info)?void 0:a.region)||""}\n            ${(null==(m=e.unref(C).info)?void 0:m.site_address)||""}\n            ${(null==(E=e.unref(C).info)?void 0:E.site_name)||""}\n            ${(null==(O=e.unref(C).info)?void 0:O.cabinet_address)||""}`)}:{},{x:e.unref(M)===e.unref(s.OrderResultEnum).DONE},(e.unref(M),e.unref(s.OrderResultEnum).DONE,{}),{y:e.t(e.unref(T).btnText),z:e.o(y),A:e.p({shape:"square",isBlock:!0}),B:e.unref(M)!==e.unref(s.OrderResultEnum).FORGET},e.unref(M)!==e.unref(s.OrderResultEnum).FORGET?e.e({C:e.unref(M)===e.unref(s.OrderResultEnum).LONG_UNLOCK&&e.unref(C).status===e.unref(s.OrderStatusEnum).Progressing},e.unref(M)===e.unref(s.OrderResultEnum).LONG_UNLOCK&&e.unref(C).status===e.unref(s.OrderStatusEnum).Progressing?{D:e.t(e.unref(r.t)("order.result.problem.unusedLockerTip")),E:e.unref(t.config).fileBaseUrl+"/icon/s-1.png",F:e.o((u=>{return s=e.unref(C),void n.showModal({title:r.t("hooks.uni-hooks.dialog.5"),content:r.t("sub-pages.order.result.index.17")}).then((()=>{e.index.navigateTo({url:`/sub-pages/order/detail/index?orderId=${s.id}`})}));var s}))}:e.unref(M)===e.unref(s.OrderResultEnum).UNLOCK&&e.unref(C).status===e.unref(s.OrderStatusEnum).Progressing?{H:e.t(e.unref(r.t)("order.result.problem.unusedLockerTip")),I:e.unref(t.config).fileBaseUrl+"/icon/s-1.png",J:e.o((u=>(e=>{n.showModal({title:r.t("order.result.modal.end.title"),content:r.t("order.result.modal.end.content")}).then((()=>{u(e.id)}));const u=async e=>{await c.lockerOrderApi.end(e),N(e)}})(e.unref(C))))}:e.unref(M)===e.unref(s.OrderResultEnum).DONE||e.unref(C).status===e.unref(s.OrderStatusEnum).Done?{L:e.t(e.unref(r.t)("order.result.problem.unreceivedItemsTip")),M:e.unref(t.config).fileBaseUrl+"/icon/s-1.png"}:e.e({N:e.unref(C).id},e.unref(C).id?{O:e.t(e.unref(r.t)("order.result.problem.lockerIssueTip")),P:`/sub-pages/order/question/index?orderId=${e.unref(C).id}`,Q:e.unref(t.config).fileBaseUrl+"/icon/s-1.png"}:{}),{G:e.unref(M)===e.unref(s.OrderResultEnum).UNLOCK&&e.unref(C).status===e.unref(s.OrderStatusEnum).Progressing,K:e.unref(M)===e.unref(s.OrderResultEnum).DONE||e.unref(C).status===e.unref(s.OrderStatusEnum).Done}):{},{R:e.sr(D,"3e93ff3b-4",{k:"ModalRef"}),S:e.p({id:"ModalRef"})})}}}),p=e._export_sfc(g,[["__scopeId","data-v-3e93ff3b"]]);wx.createPage(p);
