"use strict";const e=require("../../../common/vendor.js"),o=require("../../../local/index.js");require("../../../hooks/uni-hooks/new-dialog.js"),require("../../../store/modules/app.js"),require("../../../store/modules/device.js"),require("../../../store/modules/order.js"),require("../../../store/modules/user.js"),require("../../../utils/uniAsync.js"),require("../../../utils/wx.log.js"),require("../../../utils/config/index.js"),require("../../../hooks/uni-hooks/dialog.js"),require("../../../hooks/uni-hooks/request.js"),require("../../../hooks/uni-hooks/wechat.js"),require("../../../hooks/useCountryCode.js");const s=require("../../../api/coupon.js");if(require("../../../hooks/uni-hooks/unite.js"),require("../../../const/platform.js"),require("../../../shared/cache.js"),require("../../../const/cache.js"),require("../../../hooks/uni-hooks/cache.js"),require("../../../utils/config/env.js"),require("../../../uni_modules/mot-utils/index.js"),require("../../../theme/hooks/useTheme.js"),require("../../../theme/hooks/themeConfig.js"),require("../../../theme/hooks/themeKeys.js"),require("../../../api/device.js"),require("../../../api/order.js"),require("../../../api/user.js"),require("../../../const/order.js"),require("../../../hooks/uni-hooks/router.js"),require("../../../hooks/usePromise.js"),require("../../../api/delivery.js"),require("../../../shared/device.js"),require("../../../const/common.js"),require("../../../utils/appEnterVerif.js"),require("../../../hooks/use-common.js"),require("../../../hooks/uni-hooks/loading.js"),require("../../../hooks/uni-hooks/common.js"),require("../../../utils/url.js"),require("../../../hooks/uni-hooks/report.js"),require("../../../api/data.js"),!Array){(e.resolveComponent("mot-button")+e.resolveComponent("uni-popup"))()}Math||(r+u+(()=>"../../../uni_modules/mot-button/components/mot-button/mot-button.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const u=()=>"./coupon-list-item.js",r=()=>"../../popup-header/index.js",i=e.defineComponent({__name:"exchange-success-popup",props:{modelValue:{type:Boolean,default:!1},item:{type:Object,default:()=>({})}},emits:["update:modelValue","confirm"],setup(u,{emit:r}){const i=u,t=e.ref({}),n={exchange:{title:o.t("coupon.exchange_success"),desc:o.t("coupon.auto_issued_to_my_coupons")},buy:{title:o.t("sub-pages.coupon.success.index.7"),desc:o.t("me.coupon-result.index.2")}},c=e.ref("exchange"),a=e.computed({get:()=>i.modelValue,set:e=>r("update:modelValue",e)}),p=e.ref();e.watch((()=>a.value),(async o=>{if(await e.nextTick$1(),o){const{id:e}=i.item;m(e),p.value&&p.value.open()}else p.value&&p.value.close()}),{immediate:!0});const l=()=>{r("confirm",""),a.value=!1},m=async e=>{const o=await s.couponApi.find({coupon_order_id:e});t.value=o[0]},d=()=>{r("confirm",t.value),a.value=!1};return(s,u)=>({a:e.o(l),b:e.t(n[e.unref(c)].title),c:e.p({coupon:e.unref(t)}),d:e.t(n[e.unref(c)].desc),e:e.t(e.unref(o.t)("coupon.use_now")),f:e.o(d),g:e.p({shape:"square",isBlock:!0}),h:e.sr(p,"8f1cda44-0",{k:"popup"}),i:e.p({type:"bottom","safe-area":!1,"is-mask-click":!1})})}}),t=e._export_sfc(i,[["__scopeId","data-v-8f1cda44"]]);wx.createComponent(t);
