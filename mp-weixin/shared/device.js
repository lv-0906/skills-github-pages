"use strict";const e=require("../const/common.js"),s=require("../const/order.js");require("../store/modules/app.js");const r=require("../store/modules/device.js");require("../store/modules/order.js"),require("../store/modules/user.js");const t=require("../local/index.js");require("../common/vendor.js"),require("../hooks/uni-hooks/new-dialog.js"),require("../utils/uniAsync.js"),require("../utils/wx.log.js"),require("../utils/config/index.js"),require("../hooks/uni-hooks/dialog.js"),require("../hooks/uni-hooks/request.js"),require("../hooks/uni-hooks/wechat.js"),require("../hooks/useCountryCode.js");const o=()=>{const{cabinet:e}=r.useDeviceStore();return e.locker_scene&&e.type===s.CabinetTypeEnums.ONE_CODE_ONE_CABINET};exports.checkValidCabinet=function(s,r,n,i){const{locker_types:u,rental_period_map:a,locker_count_map:c,enable_locker_types:d,type:l}=s||{};if(!s.online&&!s.fake)return{passed:!1,message:t.t("shared.device.1"),type:"cabinet_offline"};if(s.is_reverse&&!i.isopen)return{passed:!1,message:t.t("shared.device.6"),type:"cabinet_is_reverse"};if(s.status!==e.StatusEnum.Normal&&!i.isopen)return{passed:!1,message:t.t("shared.device.2"),type:"cabinet_disabled"};if(r.status!==e.StatusEnum.Normal&&!i.isopen)return{passed:!1,message:t.t("shared.device.3"),type:"site_disabled"};if(n.status!==e.StatusEnum.Normal&&!i.isopen)return{passed:!1,message:t.t("shared.device.7"),type:"site_disabled"};if(o()&&c&&Object.keys(c).length&&!i.isopen){const[e]=Object.values(c);if(!e)return{passed:!1,message:t.t("sub-pages.order.deposit.index.54"),type:"cabinet_occupancy"}}return{passed:!0,type:"nearby_cabinet",message:""}},exports.defaultLockerType=function(e){return e&&e.length>0?e[0]:1},exports.defaultRentalPeriod=function(e,r){for(const s in e)if(e[s].includes(r))return Number(s);return s.RentalPeriodEnum.SHORT_RENTAL},exports.hasLongShortRentalPeriod=e=>e[s.RentalPeriodEnum.LONG_RENTAL]&&e[s.RentalPeriodEnum.SHORT_RENTAL],exports.isOneCodOneCabinet=o,exports.lockerTypesEnable=function(e){return!!(e&&e.length>1)};
